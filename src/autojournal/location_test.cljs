(ns autojournal.location-test
  (:require [autojournal.location :as loc]
            [cljs.test :refer (deftest is)]))

(deftest are-same-place
  (is (loc/-are-same-place
       (loc/-row-to-reading
        {:elevation "44.99261474609375",
         :accuracy "9.648001",
         :time "2022-05-15T07:00:28.000Z",
         :lon "-122.31444872",
         :lat "47.66866721"})
       (loc/-row-to-reading
        {:elevation "45.0035400390625",
         :accuracy "9.648001",
         :time "2022-05-15T07:01:03.000Z",
         :lon "-122.31444892",
         :lat "47.66866769"}))))

(deftest are-not-same-place
  (is (not (loc/-are-same-place
            (loc/-row-to-reading
             {:elevation "44.99261474609375",
              :accuracy "9.648001",
              :time "2022-05-15T07:00:28.000Z",
              :lon "-122.31444872",
              :lat "47.66866721"})
            (loc/-row-to-reading
             {:elevation "45.0035400390625",
              :accuracy "9.648001",
              :time "2022-05-15T07:01:03.000Z",
              :lon "-142.31444892",
              :lat "47.66866769"})))))

(deftest many-readings-to-events
  (is (= []
         (loc/-readings-to-events
           [{:time 1652598028000, :lat 47.66866721, :lon -122.31444872, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652598063000, :lat 47.66866769, :lon -122.31444892, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652598097000, :lat 47.66866761, :lon -122.31444817, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652598130000, :lat 47.66866714, :lon -122.3144491, 
             :accuracy-miles 0.0039966694421315575}
            {:time 1652598180000, :lat 47.66866672, :lon -122.31445055, 
             :accuracy-miles 0.009991673605328892}
            {:time 1652598213000, :lat 47.66866612, :lon -122.31445134, 
             :accuracy-miles 0.007327227310574521}
            {:time 1652598250000, :lat 47.66866617, :lon -122.31445277, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652598282000, :lat 47.66866565, :lon -122.31445328, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652598316000, :lat 47.66866509, :lon -122.31445331, 
             :accuracy-miles 0.007993338884263115}
            {:time 1652598349000, :lat 47.66866487, :lon -122.31445257, 
             :accuracy-miles 0.0039966694421315575}
            {:time 1652598382000, :lat 47.66866571, :lon -122.31445294, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652598415000, :lat 47.66866621, :lon -122.31445264, 
             :accuracy-miles 0.005328892589508743}
            {:time 1652598467000, :lat 47.66866625, :lon -122.31445314, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652598500000, :lat 47.66866679, :lon -122.31445321, 
             :accuracy-miles 0.005328892589508743}
            {:time 1652598533000, :lat 47.66866531, :lon -122.31445327, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652598589000, :lat 47.66866441, :lon -122.31445323, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652598622000, :lat 47.66866467, :lon -122.31445279, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652598655000, :lat 47.66866476, :lon -122.31445304, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652598688000, :lat 47.66866462, :lon -122.31445292, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652598721000, :lat 47.6686636, :lon -122.31445401, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652598754000, :lat 47.66866389, :lon -122.31445348, 
             :accuracy-miles 0.010657785179017486}
            {:time 1652598787000, :lat 47.66866391, :lon -122.31445383, 
             :accuracy-miles 0.0033305578684429647}
            {:time 1652598819000, :lat 47.6686643, :lon -122.31445361, 
             :accuracy-miles 0.010657785179017486}
            {:time 1652598863000, :lat 47.66866343, :lon -122.31445393, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652598896000, :lat 47.66866338, :lon -122.3144534, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652598929000, :lat 47.66866379, :lon -122.31445256, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652598962000, :lat 47.66866393, :lon -122.31445213, 
             :accuracy-miles 0.009991673605328892}
            {:time 1652598995000, :lat 47.66866419, :lon -122.31445158, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652599032000, :lat 47.66866353, :lon -122.31445203, 
             :accuracy-miles 0.0026644462947543715}
            {:time 1652599065000, :lat 47.66866299, :lon -122.31445195, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652599098000, :lat 47.66866308, :lon -122.31445187, 
             :accuracy-miles 0.0033305578684429647}
            {:time 1652599143000, :lat 47.66866372, :lon -122.31445168, 
             :accuracy-miles 0.013322231473771859}
            {:time 1652599176000, :lat 47.66866329, :lon -122.3144516, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652599211000, :lat 47.66866237, :lon -122.31445107, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652599244000, :lat 47.66866184, :lon -122.31445161, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652599295000, :lat 47.66866203, :lon -122.31445187, 
             :accuracy-miles 0.013988343668833187}
            {:time 1652599349000, :lat 47.66865993, :lon -122.31445213, 
             :accuracy-miles 0.007993338884263115}
            {:time 1652599382000, :lat 47.66866032, :lon -122.31445263, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652599435000, :lat 47.66866067, :lon -122.3144529, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652599467000, :lat 47.6686607, :lon -122.3144532, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652599501000, :lat 47.66866009, :lon -122.31445414, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652599534000, :lat 47.6686604, :lon -122.31445408, 
             :accuracy-miles 0.007327227310574521}
            {:time 1652599580413, :lat 47.66865986, :lon -122.31445468, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652599623000, :lat 47.66866003, :lon -122.31445458, 
             :accuracy-miles 0.012656119900083264}
            {:time 1652599655000, :lat 47.66866, :lon -122.31445411, 
             :accuracy-miles 0.01132389675270608}
            {:time 1652599713000, :lat 47.66866015, :lon -122.31445425, 
             :accuracy-miles 0.01931723625834193}
            {:time 1652599746000, :lat 47.66866041, :lon -122.31445364, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652599779000, :lat 47.66866029, :lon -122.31445422, 
             :accuracy-miles 0.005328892589508743}
            {:time 1652599819000, :lat 47.66866085, :lon -122.31445421, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652599852000, :lat 47.66866098, :lon -122.31445412, 
             :accuracy-miles 0.007327227310574521}
            {:time 1652599885000, :lat 47.66866062, :lon -122.31445422, 
             :accuracy-miles 0.009991673605328892}
            {:time 1652599918000, :lat 47.6686604, :lon -122.31445442, 
             :accuracy-miles 0.012656119900083264}
            {:time 1652599951000, :lat 47.66879542, :lon -122.31429538, 
             :accuracy-miles 0.012656119900083264}
            {:time 1652599984000, :lat 47.66868403, :lon -122.31435937, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652600022000, :lat 47.66864453, :lon -122.31438439, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652600055000, :lat 47.6686078, :lon -122.31441197, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652600088000, :lat 47.66862337, :lon -122.31441364, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652600121000, :lat 47.66862935, :lon -122.31442559, 
             :accuracy-miles 0.01132389675270608}
            {:time 1652600168000, :lat 47.66861024, :lon -122.314441, 
             :accuracy-miles 0.007993338884263115}
            {:time 1652600201000, :lat 47.66861116, :lon -122.31444103, 
             :accuracy-miles 0.012656119900083264}
            {:time 1652600234000, :lat 47.66859643, :lon -122.31444974, 
             :accuracy-miles 0.010657785179017486}
            {:time 1652600267000, :lat 47.6685929, :lon -122.31446988, 
             :accuracy-miles 0.0026644462947543715}
            {:time 1652600300000, :lat 47.66860028, :lon -122.31446246, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652600333000, :lat 47.66859874, :lon -122.31446539, 
             :accuracy-miles 0.005328892589508743}
            {:time 1652600366000, :lat 47.66860456, :lon -122.31446365, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652600411000, :lat 47.66860899, :lon -122.31446719, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652600461000, :lat 47.66860808, :lon -122.31446917, 
             :accuracy-miles 0.0066611157368859295}
            {:time 1652600495000, :lat 47.66861652, :lon -122.31447442, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652600531000, :lat 47.6686256, :lon -122.31447029, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652600565000, :lat 47.6686238, :lon -122.31446307, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652600615000, :lat 47.66863005, :lon -122.31446024, 
             :accuracy-miles 0.013322231473771859}
            {:time 1652600648000, :lat 47.66862588, :lon -122.3144574, 
             :accuracy-miles 0.005328892589508743}
            {:time 1652600681000, :lat 47.66862708, :lon -122.31445193, 
             :accuracy-miles 0.0093255620316403}
            {:time 1652600720000, :lat 47.66862689, :lon -122.31445162, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652600769000, :lat 47.66863375, :lon -122.31444813, 
             :accuracy-miles 0.0033305578684429647}
            {:time 1652600823000, :lat 47.66864786, :lon -122.31444083, 
             :accuracy-miles 0.0033305578684429647}
            {:time 1652600855000, :lat 47.66864449, :lon -122.31443979, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652600899000, :lat 47.66864291, :lon -122.31444133, 
             :accuracy-miles 0.008659451079324443}
            {:time 1652600932000, :lat 47.66864203, :lon -122.31443952, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652600965000, :lat 47.66863647, :lon -122.31444599, 
             :accuracy-miles 0.005995004784570073}
            {:time 1652600998000, :lat 47.66863759, :lon -122.31444504, 
             :accuracy-miles 0.00466278101582015}
            {:time 1652601046000, :lat 47.66864056, :lon -122.31444726, 
             :accuracy-miles 0.011990008947767408}
            {:time 1652601079000, :lat 47.66863877, :lon -122.31444558, 
             :accuracy-miles 0.00466278101582015}]))))
         
